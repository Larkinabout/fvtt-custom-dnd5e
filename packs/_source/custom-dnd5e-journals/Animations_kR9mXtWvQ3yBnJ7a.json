{
  "name": "Animations",
  "_id": "kR9mXtWvQ3yBnJ7a",
  "pages": [
    {
      "sort": 100000,
      "name": "Overview",
      "type": "text",
      "_id": "aT1nYuXwR4zCpK8b",
      "system": {},
      "title": {
        "show": true,
        "level": 1
      },
      "image": {},
      "text": {
        "format": 1,
        "content": "<p>Custom D&amp;D 5e includes a collection of screen animations that can be used to enhance dramatic moments in your game. These effects play as visual overlays or distortions on the screen for targeted players.</p><h2>Built-in Animations</h2><p>Some animations are triggered automatically by module features:</p><ul><li><p><strong>Massive Damage</strong> &mdash; When a character fails a massive damage saving throw, a combination of screen shake, flash, and blood splatter plays for the affected player. Enable this in <strong>Gameplay</strong> &gt; <strong>Massive Damage</strong> &gt; <strong>Animation</strong>.</p></li><li><p><strong>Inspiration</strong> &mdash; When a character is awarded inspiration, a light rays animation plays for the affected player. Enable this in <strong>Gameplay</strong> &gt; <strong>Inspiration</strong> &gt; <strong>Animation</strong>.</p></li><li><p><strong>Exhaustion</strong> &mdash; When a character suffers exhaustion, a combination of vignette, blur, and sway plays for the affected player. Enable this in <strong>Gameplay</strong> &gt; <strong>Exhaustion</strong> &gt; <strong>Animation</strong>.</p></li></ul><h2>Photosensitive Mode</h2><p>Animations that involve bright flashes or rapid visual changes are automatically skipped when Foundry's <strong>Photosensitive Mode</strong> is enabled in the core settings. This applies to flash, light rays, color split, splatter, and wave animations.</p><h2>Targeted Playback</h2><p>Each animation accepts an optional <code>userIds</code> parameter. When provided, the animation only plays for those users. When omitted, the animation plays for the user who called it. This allows you to target specific players for dramatic effect &mdash; for example, only the player whose character took massive damage sees the screen shake.</p>"
      },
      "video": {
        "controls": true,
        "volume": 0.5
      },
      "src": null,
      "ownership": {
        "default": -1
      },
      "flags": {},
      "_stats": {
        "compendiumSource": null,
        "duplicateSource": null,
        "coreVersion": "13.351",
        "systemId": "dnd5e",
        "systemVersion": "5.2.5",
        "createdTime": null,
        "modifiedTime": null,
        "lastModifiedBy": null,
        "exportSource": null
      },
      "category": null,
      "_key": "!journal.pages!kR9mXtWvQ3yBnJ7a.aT1nYuXwR4zCpK8b"
    },
    {
      "sort": 200000,
      "name": "Animation List",
      "type": "text",
      "_id": "bU2oZvYxS5aDqL9c",
      "system": {},
      "title": {
        "show": true,
        "level": 1
      },
      "image": {},
      "text": {
        "format": 1,
        "content": "<h2>Screen Animations</h2><p>Screen animations apply a visual effect over the entire browser window, including the UI.</p><table><thead><tr><th><p><strong>Animation</strong></p></th><th><p><strong>Description</strong></p></th></tr></thead><tbody><tr><td><p><strong>shakeScreen</strong></p></td><td><p>Shakes the entire screen with a decaying intensity. Creates a jarring impact effect suitable for explosions, earthquakes, or heavy blows.</p></td></tr><tr><td><p><strong>flashScreen</strong></p></td><td><p>Flashes the screen with a color overlay that fades in and out. Useful for lightning strikes, holy smites, or sudden bursts of energy.</p></td></tr><tr><td><p><strong>blurScreen</strong></p></td><td><p>Blurs the entire screen, then gradually returns to focus. Conveys disorientation, dizziness, or magical confusion.</p></td></tr><tr><td><p><strong>swayScreen</strong></p></td><td><p>Gently rocks and rotates the screen with a decaying sway. Evokes drunkenness, sea sickness, or psychic disorientation.</p></td></tr><tr><td><p><strong>lightRaysScreen</strong></p></td><td><p>Projects rotating beams of coloured light across the screen. Ideal for divine blessings, level-ups, or moments of revelation.</p></td></tr><tr><td><p><strong>splatterScreen</strong></p></td><td><p>Splatters liquid across the screen with dripping trails. The colour, number of splats, and drip speed are all configurable.</p></td></tr><tr><td><p><strong>vignetteScreen</strong></p></td><td><p>Darkens the edges of the screen in a vignette pattern. Creates a sense of tunnel vision, dread, or creeping darkness.</p></td></tr></tbody></table><h2>Canvas Animations</h2><p>Canvas animations apply a visual effect to the game canvas only, leaving the UI unaffected.</p><table><thead><tr><th><p><strong>Animation</strong></p></th><th><p><strong>Description</strong></p></th></tr></thead><tbody><tr><td><p><strong>shakeCanvas</strong></p></td><td><p>Shakes the game canvas with a decaying intensity. Similar to shakeScreen but only affects the map.</p></td></tr><tr><td><p><strong>flashCanvas</strong></p></td><td><p>Flashes the game canvas with a color overlay. Similar to flashScreen but only affects the map.</p></td></tr><tr><td><p><strong>blurCanvas</strong></p></td><td><p>Blurs the game canvas, then gradually returns to focus. Similar to blurScreen but only affects the map.</p></td></tr><tr><td><p><strong>colorSplitCanvas</strong></p></td><td><p>Splits the canvas into offset colour layers that drift apart and recombine. Creates a chromatic aberration effect for psychic damage, dimensional rifts, or disorientation.</p></td></tr><tr><td><p><strong>waveCanvas</strong></p></td><td><p>Applies an organic wave distortion across the canvas. Evokes underwater environments, heat haze, or reality warping.</p></td></tr></tbody></table>"
      },
      "video": {
        "controls": true,
        "volume": 0.5
      },
      "src": null,
      "ownership": {
        "default": -1
      },
      "flags": {},
      "_stats": {
        "compendiumSource": null,
        "duplicateSource": null,
        "coreVersion": "13.351",
        "systemId": "dnd5e",
        "systemVersion": "5.2.5",
        "createdTime": null,
        "modifiedTime": null,
        "lastModifiedBy": null,
        "exportSource": null
      },
      "category": null,
      "_key": "!journal.pages!kR9mXtWvQ3yBnJ7a.bU2oZvYxS5aDqL9c"
    },
    {
      "sort": 300000,
      "name": "Using Animations in Macros",
      "type": "text",
      "_id": "cV3pAwZyT6bErM0d",
      "system": {},
      "title": {
        "show": true,
        "level": 1
      },
      "image": {},
      "text": {
        "format": 1,
        "content": "<p>All animations are available through the module API and can be called from <strong>Script</strong> macros.</p><h2>Accessing the API</h2><p><code>const anim = game.modules.get('custom-dnd5e').api.animations;</code></p><h2>Basic Usage</h2><p>Call any animation with default settings:</p><p><code>anim.shakeScreen();</code></p><p><code>anim.flashScreen();</code></p><p><code>anim.splatterScreen();</code></p><h2>Customising Options</h2><p>Pass an options object to customise the effect:</p><p><code>anim.shakeScreen({ intensity: 10, duration: 1000 });</code></p><p><code>anim.flashScreen({ color: '#00ff00', opacity: 0.6, duration: 800 });</code></p><p><code>anim.splatterScreen({ color: '#2e8b57', density: 5, duration: 5000 });</code></p><h2>Targeting Specific Players</h2><p>Use the <code>userIds</code> parameter to play the animation only for certain users. You can get a user's ID from <code>game.users</code>.</p><p><code>// Play for the current user only</code></p><p><code>anim.vignetteScreen({ userIds: [game.user.id] });</code></p><p><code>// Play for all owners of the selected token</code></p><p><code>const userIds = game.users.filter(u =&gt; token.actor.testUserPermission(u, 'OWNER')).map(u =&gt; u.id);</code></p><p><code>anim.shakeScreen({ intensity: 8, userIds });</code></p><h2>Combining Animations</h2><p>Call multiple animations together for a composite effect:</p><p><code>const anim = game.modules.get('custom-dnd5e').api.animations;</code></p><p><code>anim.shakeScreen({ intensity: 8, duration: 750 });</code></p><p><code>anim.flashScreen({ duration: 750 });</code></p><p><code>anim.splatterScreen({ duration: 3500 });</code></p>"
      },
      "video": {
        "controls": true,
        "volume": 0.5
      },
      "src": null,
      "ownership": {
        "default": -1
      },
      "flags": {},
      "_stats": {
        "compendiumSource": null,
        "duplicateSource": null,
        "coreVersion": "13.351",
        "systemId": "dnd5e",
        "systemVersion": "5.2.5",
        "createdTime": null,
        "modifiedTime": null,
        "lastModifiedBy": null,
        "exportSource": null
      },
      "category": null,
      "_key": "!journal.pages!kR9mXtWvQ3yBnJ7a.cV3pAwZyT6bErM0d"
    },
    {
      "sort": 400000,
      "name": "Options Reference",
      "type": "text",
      "_id": "dW4qBxAzU7cFsN1e",
      "system": {},
      "title": {
        "show": true,
        "level": 1
      },
      "image": {},
      "text": {
        "format": 1,
        "content": "<p>Each animation accepts an options object. All options have sensible defaults and are entirely optional.</p><h2>shakeScreen / shakeCanvas</h2><table><thead><tr><th><p><strong>Option</strong></p></th><th><p><strong>Default</strong></p></th><th><p><strong>Description</strong></p></th></tr></thead><tbody><tr><td><p>intensity</p></td><td><p>5 / 25</p></td><td><p>Shake strength in pixels.</p></td></tr><tr><td><p>duration</p></td><td><p>500</p></td><td><p>Duration in milliseconds.</p></td></tr><tr><td><p>userIds</p></td><td><p>&mdash;</p></td><td><p>Array of user IDs to target.</p></td></tr></tbody></table><h2>flashScreen / flashCanvas</h2><table><thead><tr><th><p><strong>Option</strong></p></th><th><p><strong>Default</strong></p></th><th><p><strong>Description</strong></p></th></tr></thead><tbody><tr><td><p>color</p></td><td><p>#ff0000 / 0xFF0000</p></td><td><p>Flash colour (CSS hex string for screen, hex number for canvas).</p></td></tr><tr><td><p>opacity</p></td><td><p>0.4</p></td><td><p>Peak opacity (0&ndash;1).</p></td></tr><tr><td><p>duration</p></td><td><p>500</p></td><td><p>Duration in milliseconds.</p></td></tr><tr><td><p>userIds</p></td><td><p>&mdash;</p></td><td><p>Array of user IDs to target.</p></td></tr></tbody></table><h2>blurScreen / blurCanvas</h2><table><thead><tr><th><p><strong>Option</strong></p></th><th><p><strong>Default</strong></p></th><th><p><strong>Description</strong></p></th></tr></thead><tbody><tr><td><p>intensity</p></td><td><p>5</p></td><td><p>Maximum blur strength in pixels.</p></td></tr><tr><td><p>duration</p></td><td><p>1500</p></td><td><p>Duration in milliseconds.</p></td></tr><tr><td><p>userIds</p></td><td><p>&mdash;</p></td><td><p>Array of user IDs to target.</p></td></tr></tbody></table><h2>swayScreen</h2><table><thead><tr><th><p><strong>Option</strong></p></th><th><p><strong>Default</strong></p></th><th><p><strong>Description</strong></p></th></tr></thead><tbody><tr><td><p>intensity</p></td><td><p>2</p></td><td><p>Maximum rotation in degrees.</p></td></tr><tr><td><p>duration</p></td><td><p>2000</p></td><td><p>Duration in milliseconds.</p></td></tr><tr><td><p>frequency</p></td><td><p>2</p></td><td><p>Oscillation speed (cycles per second).</p></td></tr><tr><td><p>userIds</p></td><td><p>&mdash;</p></td><td><p>Array of user IDs to target.</p></td></tr></tbody></table><h2>lightRaysScreen</h2><table><thead><tr><th><p><strong>Option</strong></p></th><th><p><strong>Default</strong></p></th><th><p><strong>Description</strong></p></th></tr></thead><tbody><tr><td><p>color</p></td><td><p>#fff5d6</p></td><td><p>Ray colour as a CSS hex string.</p></td></tr><tr><td><p>rays</p></td><td><p>12</p></td><td><p>Number of light rays.</p></td></tr><tr><td><p>duration</p></td><td><p>2500</p></td><td><p>Duration in milliseconds.</p></td></tr><tr><td><p>userIds</p></td><td><p>&mdash;</p></td><td><p>Array of user IDs to target.</p></td></tr></tbody></table><h2>splatterScreen</h2><table><thead><tr><th><p><strong>Option</strong></p></th><th><p><strong>Default</strong></p></th><th><p><strong>Description</strong></p></th></tr></thead><tbody><tr><td><p>color</p></td><td><p>#8b0000</p></td><td><p>Splatter colour as a CSS hex string.</p></td></tr><tr><td><p>density</p></td><td><p>10</p></td><td><p>Number of splat impacts (1&ndash;20).</p></td></tr><tr><td><p>duration</p></td><td><p>3500</p></td><td><p>Duration in milliseconds.</p></td></tr><tr><td><p>fluidity</p></td><td><p>1.0</p></td><td><p>Drip speed from 0 (frozen) to 2 (watery).</p></td></tr><tr><td><p>userIds</p></td><td><p>&mdash;</p></td><td><p>Array of user IDs to target.</p></td></tr></tbody></table><h2>vignetteScreen</h2><table><thead><tr><th><p><strong>Option</strong></p></th><th><p><strong>Default</strong></p></th><th><p><strong>Description</strong></p></th></tr></thead><tbody><tr><td><p>intensity</p></td><td><p>0.8</p></td><td><p>Maximum darkness at the edges (0&ndash;1).</p></td></tr><tr><td><p>duration</p></td><td><p>2000</p></td><td><p>Duration in milliseconds.</p></td></tr><tr><td><p>userIds</p></td><td><p>&mdash;</p></td><td><p>Array of user IDs to target.</p></td></tr></tbody></table><h2>colorSplitCanvas</h2><table><thead><tr><th><p><strong>Option</strong></p></th><th><p><strong>Default</strong></p></th><th><p><strong>Description</strong></p></th></tr></thead><tbody><tr><td><p>colors</p></td><td><p>[\"#ff0000\", \"#00ff00\", \"#0000ff\"]</p></td><td><p>Array of up to three hex colours for the split layers.</p></td></tr><tr><td><p>intensity</p></td><td><p>25</p></td><td><p>Maximum pixel offset for layer movement.</p></td></tr><tr><td><p>duration</p></td><td><p>4000</p></td><td><p>Duration in milliseconds.</p></td></tr><tr><td><p>userIds</p></td><td><p>&mdash;</p></td><td><p>Array of user IDs to target.</p></td></tr></tbody></table><h2>waveCanvas</h2><table><thead><tr><th><p><strong>Option</strong></p></th><th><p><strong>Default</strong></p></th><th><p><strong>Description</strong></p></th></tr></thead><tbody><tr><td><p>intensity</p></td><td><p>30</p></td><td><p>Maximum displacement in pixels.</p></td></tr><tr><td><p>speed</p></td><td><p>1</p></td><td><p>Animation speed multiplier.</p></td></tr><tr><td><p>duration</p></td><td><p>4000</p></td><td><p>Duration in milliseconds.</p></td></tr><tr><td><p>userIds</p></td><td><p>&mdash;</p></td><td><p>Array of user IDs to target.</p></td></tr></tbody></table>"
      },
      "video": {
        "controls": true,
        "volume": 0.5
      },
      "src": null,
      "ownership": {
        "default": -1
      },
      "flags": {},
      "_stats": {
        "compendiumSource": null,
        "duplicateSource": null,
        "coreVersion": "13.351",
        "systemId": "dnd5e",
        "systemVersion": "5.2.5",
        "createdTime": null,
        "modifiedTime": null,
        "lastModifiedBy": null,
        "exportSource": null
      },
      "category": null,
      "_key": "!journal.pages!kR9mXtWvQ3yBnJ7a.dW4qBxAzU7cFsN1e"
    }
  ],
  "folder": null,
  "sort": 0,
  "ownership": {
    "default": 0
  },
  "flags": {},
  "_stats": {
    "compendiumSource": null,
    "duplicateSource": null,
    "coreVersion": "13.351",
    "systemId": "dnd5e",
    "systemVersion": "5.2.5",
    "createdTime": null,
    "modifiedTime": null,
    "lastModifiedBy": null,
    "exportSource": null
  },
  "categories": [],
  "_key": "!journal!kR9mXtWvQ3yBnJ7a"
}
