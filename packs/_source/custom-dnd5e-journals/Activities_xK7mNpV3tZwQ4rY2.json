{
  "name": "Activities",
  "_id": "xK7mNpV3tZwQ4rY2",
  "pages": [
    {
      "sort": 100000,
      "name": "Overview",
      "type": "text",
      "_id": "aR2nYuXwT4zDpK9c",
      "system": {},
      "title": {
        "show": true,
        "level": 1
      },
      "image": {},
      "text": {
        "format": 1,
        "content": "<p>Located in <strong>Game Settings &gt; Configure Settings &gt; Custom D&amp;D 5e &gt; Configure Activities</strong></p><p>Adds custom activity types for features, items and spells, and a targeting prompt that intercepts activity usage to ensure targets are selected before proceeding.</p><p>All options are disabled by default. Custom activities require a reload after enabling.</p>"
      },
      "video": {
        "controls": true,
        "volume": 0.5
      },
      "src": null,
      "ownership": {
        "default": -1
      },
      "flags": {},
      "_stats": {
        "compendiumSource": null,
        "duplicateSource": null,
        "coreVersion": "13.351",
        "systemId": "dnd5e",
        "systemVersion": "5.2.5",
        "createdTime": null,
        "modifiedTime": 1771964025579,
        "lastModifiedBy": "nwvwWRm7rUrAK4Jo",
        "exportSource": null
      },
      "category": null,
      "_key": "!journal.pages!xK7mNpV3tZwQ4rY2.aR2nYuXwT4zDpK9c"
    },
    {
      "sort": 200000,
      "name": "Macro Activity",
      "type": "text",
      "_id": "bS3oZvYxU5aEqL0d",
      "system": {},
      "title": {
        "show": true,
        "level": 1
      },
      "image": {},
      "text": {
        "format": 1,
        "content": "<p>The Macro activity executes a macro when the activity is used.</p><h2 class=\"custom-dnd5e-h2\">Adding a Macro Activity</h2><p>After enabling the Macro activity:</p><ol><li><p>Click <span class=\"fa-solid fa-pen-to-square\">​</span> <strong>Edit</strong> on a feature, item or spell.</p></li><li><p>Navigate to the <strong>Activities</strong> tab.</p></li><li><p>Click the <span class=\"fa-solid fa-plus\">​</span> button.</p></li><li><p>Select <strong>Macro </strong>in the list.</p></li><li><p>Click <span class=\"fa-solid fa-check\">​</span> <strong>Create Activity.</strong></p></li></ol><h2 class=\"custom-dnd5e-h2\">Assigning a Macro</h2><ol><li><p>Navigate to the <span class=\"fa-solid fa-sun\">​</span> <strong>Effect</strong> tab.</p></li><li><p>Drag and drop a macro from the <span class=\"fa-solid fa-code\">​</span> <strong>Macros</strong> sidebar or a compendium onto the <em>Drag and drop a Macro</em> area.</p><article class=\"custom-dnd5e-note\"><header><p><span class=\"fa-solid fa-note-sticky\">​</span></p><p>Note</p></header><p>The macro's name will appear once assigned. To remove the macro, click the <span class=\"fa-solid fa-trash\">​</span> button.</p></article></li></ol><h2 class=\"custom-dnd5e-h2\">Auto Execute</h2><p>The <strong>Auto Execute</strong> checkbox on the <span class=\"fa-solid fa-sun\">​</span> <strong>Effect</strong> tab controls when the macro runs:</p><ul><li><p><strong>Checked (default):</strong> The macro executes automatically when the activity is used.</p></li><li><p><strong>Unchecked:</strong> A button appears on the chat card. The macro only runs when a user clicks the button.</p></li></ul><h2 class=\"custom-dnd5e-h2\">Macro Context</h2><p>The following variables are available as within the macro script:</p><table><thead><tr><th><p><strong>Variable</strong></p></th><th><p><strong>Description</strong></p></th></tr></thead><tbody><tr><td><p><code>actor</code></p></td><td><p>The actor that owns the item.</p></td></tr><tr><td><p><code>token</code></p></td><td><p>The active token for the actor.</p></td></tr><tr><td><p><code>item</code></p></td><td><p>The item the activity belongs to.</p></td></tr><tr><td><p><code>activity</code></p></td><td><p>The macro activity instance.</p></td></tr><tr><td><p><code>targets</code></p></td><td><p>The targeted tokens at the time of use.</p></td></tr><tr><td><p><code>config</code></p></td><td><p>The activity usage configuration.</p></td></tr><tr><td><p><code>message</code></p></td><td><p>The chat message associated with the usage.</p></td></tr></tbody></table>"
      },
      "video": {
        "controls": true,
        "volume": 0.5
      },
      "src": null,
      "ownership": {
        "default": -1
      },
      "flags": {},
      "_stats": {
        "compendiumSource": null,
        "duplicateSource": null,
        "coreVersion": "13.351",
        "systemId": "dnd5e",
        "systemVersion": "5.2.5",
        "createdTime": null,
        "modifiedTime": 1771963938420,
        "lastModifiedBy": "nwvwWRm7rUrAK4Jo",
        "exportSource": null
      },
      "category": null,
      "_key": "!journal.pages!xK7mNpV3tZwQ4rY2.bS3oZvYxU5aEqL0d"
    },
    {
      "sort": 300000,
      "name": "Move Activity",
      "type": "text",
      "_id": "cT4pAvZyV6bFrM1e",
      "system": {},
      "title": {
        "show": true,
        "level": 1
      },
      "image": {},
      "text": {
        "format": 1,
        "content": "<p>The Move activity enables forced movement of targeted tokens on the map. When activated, valid movement positions are highlighted and the user clicks to place the token.</p><h2 class=\"custom-dnd5e-h2\">Adding a Move Activity</h2><p>After enabling the Move activity:</p><ol><li><p>Click <span class=\"fa-solid fa-pen-to-square\">​</span> <strong>Edit</strong> on a feature, item or spell.</p></li><li><p>Navigate to the <strong>Activities</strong> tab.</p></li><li><p>Click the <span class=\"fa-solid fa-plus\">\u200b</span> button.</p></li><li><p>Select <strong>Move</strong> in the list.</p></li><li><p>Click <span class=\"fa-solid fa-check\">\u200b</span> <strong>Create Activity.</strong></p></li></ol><h2 class=\"custom-dnd5e-h2\">Configuration</h2><p>Navigate to the <span class=\"fa-solid fa-sun\">\u200b</span> <strong>Effect</strong> tab to configure the following options:</p><h3>Direction</h3><p>Controls the direction the target can be moved relative to the source token:</p><ul><li><p><strong>Push:</strong> The target is moved away from the source.</p></li><li><p><strong>Pull:</strong> The target is moved toward the source.</p></li><li><p><strong>Push or Pull:</strong> Two buttons appear on the chat card, allowing the user to choose push or pull.</p></li><li><p><strong>Any:</strong> The target can be moved in any direction.</p></li></ul><h3>Minimum Distance</h3><p>The minimum distance (in game units) that the target must be moved. Set to <strong>0</strong> by default.</p><h3>Maximum Distance</h3><p>The maximum distance (in game units) that the target can be moved. Set to <strong>5</strong> by default.</p><h3>Auto Execute</h3><p>The <strong>Auto Execute</strong> checkbox controls when movement selection starts:</p><ul><li><p><strong>Checked (default):</strong> Movement selection starts automatically when the activity is used.</p></li><li><p><strong>Unchecked:</strong> A button appears on the chat card. Movement selection only starts when a user clicks the button.</p></li></ul><h2 class=\"custom-dnd5e-h2\">Selecting a Position</h2><p>When movement selection is active:</p><ul><li><p>Open application windows are temporarily hidden to provide a clear view of the map.</p></li><li><p>Valid movement positions are highlighted in green.</p></li><li><p><strong>Left-click</strong> a highlighted position to move the target token there.</p></li><li><p><strong>Escape</strong> or <strong>right-click</strong> to cancel the movement.</p></li><li><p>Hidden application windows are restored when the movement completes or is cancelled.</p></li></ul><article class=\"custom-dnd5e-note\"><header><p><span class=\"fa-solid fa-note-sticky\">\u200b</span></p><p>Note</p></header><p>If multiple targets are selected, movement selection is repeated for each target in sequence.</p></article><h2 class=\"custom-dnd5e-h2\">Wall Collision</h2><p>Positions blocked by walls are excluded from valid movement options. The target cannot be pushed or pulled through walls.</p><h2 class=\"custom-dnd5e-h2\">Gridless Scenes</h2><p>On gridless scenes, the valid movement area is shown as a highlighted shape instead of individual grid cells. For directional modes (push/pull), this appears as a line; for any direction, an ring is drawn around the target.</p>"
      },
      "video": {
        "controls": true,
        "volume": 0.5
      },
      "src": null,
      "ownership": {
        "default": -1
      },
      "flags": {},
      "_stats": {
        "compendiumSource": null,
        "duplicateSource": null,
        "coreVersion": "13.351",
        "systemId": "dnd5e",
        "systemVersion": "5.2.5",
        "createdTime": null,
        "modifiedTime": null,
        "lastModifiedBy": null,
        "exportSource": null
      },
      "category": null,
      "_key": "!journal.pages!xK7mNpV3tZwQ4rY2.cT4pAvZyV6bFrM1e"
    },
    {
      "sort": 400000,
      "name": "Swap Activity",
      "type": "text",
      "_id": "dU5qBwAzW7cGsN2f",
      "system": {},
      "title": {
        "show": true,
        "level": 1
      },
      "image": {},
      "text": {
        "format": 1,
        "content": "<p>The Swap activity swaps the caster's token position with a target token on the map.</p><h2 class=\"custom-dnd5e-h2\">Adding a Swap Activity</h2><p>After enabling the Swap activity:</p><ol><li><p>Click <span class=\"fa-solid fa-pen-to-square\">\u200b</span> <strong>Edit</strong> on a feature, item or spell.</p></li><li><p>Navigate to the <strong>Activities</strong> tab.</p></li><li><p>Click the <span class=\"fa-solid fa-plus\">\u200b</span> button.</p></li><li><p>Select <strong>Swap</strong> in the list.</p></li><li><p>Click <span class=\"fa-solid fa-check\">\u200b</span> <strong>Create Activity.</strong></p></li></ol><h2 class=\"custom-dnd5e-h2\">Targeting Configuration</h2><p>Navigate to the <span class=\"fa-solid fa-bolt\">\u200b</span> <strong>Activation</strong> tab and select the <strong>Targeting</strong> sub-tab to configure the following options:</p><h3>Max Size</h3><p>Restricts the swap to targets of a certain size or smaller. Select a size from the dropdown, or leave as <strong>No Restriction</strong> to allow any size.</p><h3>Designated Actor</h3><p>Optionally designate a specific actor to always swap with by dragging and dropping an actor from the sidebar onto the drop area.</p><ul><li><p>If the designated actor has a <strong>single token</strong> on the map, it is targeted automatically.</p></li><li><p>If the designated actor has <strong>multiple tokens</strong>, you must target the specific token you want to swap with.</p></li><li><p>To remove the designated actor, click the <span class=\"fa-solid fa-trash\">\u200b</span> button.</p></li></ul><article class=\"custom-dnd5e-note\"><header><p><span class=\"fa-solid fa-note-sticky\">\u200b</span></p><p>Note</p></header><p>When no designated actor is set, the activity uses your currently targeted token.</p></article><h2 class=\"custom-dnd5e-h2\">Effect Configuration</h2><p>Navigate to the <span class=\"fa-solid fa-sun\">\u200b</span> <strong>Effect</strong> tab to configure the following options:</p><h3>Is Teleport</h3><p>Controls how the tokens move to their new positions:</p><ul><li><p><strong>Checked (default):</strong> Tokens instantly teleport to their new positions.</p></li><li><p><strong>Unchecked:</strong> Tokens slide to their new positions with animation.</p></li></ul><h3>Auto Execute</h3><p>The <strong>Auto Execute</strong> checkbox controls when the swap occurs:</p><ul><li><p><strong>Checked (default):</strong> The swap executes automatically when the activity is used.</p></li><li><p><strong>Unchecked:</strong> A <strong>Swap</strong> button appears on the chat card. The swap only occurs when a user clicks the button.</p></li></ul><h2 class=\"custom-dnd5e-h2\">Validation</h2><p>The activity validates several conditions before the swap is performed:</p><ul><li><p><strong>Range:</strong> If a range is configured on the <strong>Targeting</strong> sub-tab, the target must be within that distance.</p></li><li><p><strong>Target Type:</strong> If a target type (e.g. ally, enemy, willing creature) is configured, the target's disposition must match.</p></li><li><p><strong>Size:</strong> If a max size is set, the target must not exceed that size.</p></li></ul><p>If any validation fails, an error message is shown and the swap does not occur.</p><h2 class=\"custom-dnd5e-h2\">Permissions</h2><p>If the user does not have permission to move both tokens (e.g. a player swapping with a GM-owned token), the swap request is routed through the GM client automatically.</p>"
      },
      "video": {
        "controls": true,
        "volume": 0.5
      },
      "src": null,
      "ownership": {
        "default": -1
      },
      "flags": {},
      "_stats": {
        "compendiumSource": null,
        "duplicateSource": null,
        "coreVersion": "13.351",
        "systemId": "dnd5e",
        "systemVersion": "5.2.5",
        "createdTime": null,
        "modifiedTime": null,
        "lastModifiedBy": null,
        "exportSource": null
      },
      "category": null,
      "_key": "!journal.pages!xK7mNpV3tZwQ4rY2.dU5qBwAzW7cGsN2f"
    },
    {
      "sort": 500000,
      "name": "Targeting Prompt",
      "type": "text",
      "_id": "eV6rCxBaX8dHtO3g",
      "system": {},
      "title": {
        "show": true,
        "level": 1
      },
      "image": {},
      "text": {
        "format": 1,
        "content": "<p>The Targeting Prompt intercepts activity usage and prompts the user to select targets on the map before the activity proceeds. This ensures that activities requiring individual targets (e.g. attacks, spells targeting a creature) do not execute without valid targets selected.</p><h2 class=\"custom-dnd5e-h2\">How It Works</h2><p>When an activity is used that requires individual targets and not enough targets are currently selected:</p><ol><li><p>The activity is paused before any dialog, resource consumption, or chat message.</p></li><li><p>Open application windows are temporarily hidden to provide a clear view of the map.</p></li><li><p>The active tool switches to the <span class=\"fa-solid fa-bullseye\">\u200b</span> <strong>Target</strong> tool.</p></li><li><p>A cursor indicator displays the current and required target count (e.g. <em>0/1 Creature</em>).</p></li><li><p>Click tokens on the map to target or untarget them.</p></li><li><p>Once the required number of targets is reached, the activity automatically resumes.</p></li></ol><h2 class=\"custom-dnd5e-h2\">Controls</h2><ul><li><p><strong>Left-click</strong> a token to target or untarget it.</p></li><li><p><strong>Enter</strong> to confirm with the current targets (even if fewer than the maximum).</p></li><li><p><strong>Escape</strong> or <strong>right-click</strong> to cancel. The activity will not execute.</p></li></ul><h2 class=\"custom-dnd5e-h2\">Supported Activities</h2><p>The targeting prompt activates for:</p><ul><li><p><strong>Standard activities</strong> with an individual target type (e.g. Creature, Ally, Enemy) and a positive target count configured on the <span class=\"fa-solid fa-bolt\">\u200b</span> <strong>Activation</strong> tab. Activities with area-of-effect templates are excluded.</p></li><li><p><strong>Move activities</strong> which always require at least one target.</p></li><li><p><strong>Swap activities</strong> which require a target when no designated actor is configured.</p></li></ul><article class=\"custom-dnd5e-note\"><header><p><span class=\"fa-solid fa-note-sticky\">\u200b</span></p><p>Note</p></header><p>If enough targets are already selected when the activity is used, the targeting prompt is skipped and the activity proceeds normally.</p></article>"
      },
      "video": {
        "controls": true,
        "volume": 0.5
      },
      "src": null,
      "ownership": {
        "default": -1
      },
      "flags": {},
      "_stats": {
        "compendiumSource": null,
        "duplicateSource": null,
        "coreVersion": "13.351",
        "systemId": "dnd5e",
        "systemVersion": "5.2.5",
        "createdTime": null,
        "modifiedTime": null,
        "lastModifiedBy": null,
        "exportSource": null
      },
      "category": null,
      "_key": "!journal.pages!xK7mNpV3tZwQ4rY2.eV6rCxBaX8dHtO3g"
    }
  ],
  "folder": null,
  "sort": 0,
  "ownership": {
    "default": 0
  },
  "flags": {},
  "_stats": {
    "compendiumSource": null,
    "duplicateSource": null,
    "coreVersion": "13.351",
    "systemId": "dnd5e",
    "systemVersion": "5.2.5",
    "createdTime": null,
    "modifiedTime": null,
    "lastModifiedBy": null,
    "exportSource": null
  },
  "categories": [],
  "_key": "!journal!xK7mNpV3tZwQ4rY2"
}
